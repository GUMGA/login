!function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={bindings:{appKey:"@",onLogin:"&"},template:'\n\n        <svg version="1.1" data-ng-click="$ctrl.submit()" id="Layer_1" xmlns="http://www.w3.org/2000/svg" style="height: 40px;cursor:pointer;" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n        \t viewBox="0 0 291.319 291.319" style="enable-background:new 0 0 291.319 291.319;" xml:space="preserve">\n        <g>\n        \t<path style="fill:#3B5998;" d="M145.659,0c80.45,0,145.66,65.219,145.66,145.66c0,80.45-65.21,145.659-145.66,145.659\n        \t\tS0,226.109,0,145.66C0,65.219,65.21,0,145.659,0z"/>\n        \t<path style="fill:#FFFFFF;" d="M163.394,100.277h18.772v-27.73h-22.067v0.1c-26.738,0.947-32.218,15.977-32.701,31.763h-0.055\n        \t\tv13.847h-18.207v27.156h18.207v72.793h27.439v-72.793h22.477l4.342-27.156h-26.81v-8.366\n        \t\tC154.791,104.556,158.341,100.277,163.394,100.277z"/>\n        </g>\n      </svg>\n\n  ',controller:["FacebookFactory","$transclude",function(e,t){var n=this;n.$onInit=function(){e.setLang("pt_BR"),e.init({appId:n.appKey,status:!0,cookie:!1,xfbml:!1,version:"v2.4"})},n.me=function(t){e.api("/me",{fields:"name,email,gender,birthday"},function(e){var o={};o.authResponse=t.authResponse,o.user=e,n.onLogin({data:o})})},n.submit=function(){e.getLoginStatus(function(t){"connected"===t.status?n.me(t):e.login(function(e){"connected"===e.status&&n.me(e)},{scope:"public_profile,email,user_birthday"})})}}]};t.default=o},function(e,t,n){"use strict";angular.module("googleplus",[]).provider("GooglePlus",[function(){var e={};e.clientId=null,this.setClientId=function(t){return e.clientId=t,this},this.getClientId=function(){return e.clientId},e.apiKey=null,this.setApiKey=function(t){return e.apiKey=t,this},this.getApiKey=function(){return e.apiKey},e.scopes="https://www.googleapis.com/auth/plus.login",this.setScopes=function(t){return e.scopes=t,this},this.getScopes=function(){return e.scopes},this.init=function(t){var n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="https://apis.google.com/js/client.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o),angular.extend(e,t)},this.enableServerSide=function(){e.accessType="offline",e.responseType="code token id_token gsession"},this.disableServerSide=function(){delete e.accessType,delete e.responseType},this.$get=["$q","$rootScope","$timeout",function(t,n,o){var i,r=function(){};return r.prototype.init=function(t){angular.extend(e,t)},r.prototype.login=function(){i=t.defer();var n={client_id:e.clientId,scope:e.scopes,immediate:!1};return e.accessType&&e.responseType&&(n.access_type=e.accessType,n.response_type=e.responseType),gapi.auth.authorize(n,this.handleAuthResult),i.promise},r.prototype.checkAuth=function(){gapi.auth.authorize({client_id:e.clientId,scope:e.scopes,immediate:!0},this.handleAuthResult)},r.prototype.handleClientLoad=function(){gapi.client.setApiKey(e.apiKey),gapi.auth.init(function(){}),o(this.checkAuth,1)},r.prototype.handleAuthResult=function(e){e&&!e.error?(i.resolve(e),n.$apply()):i.reject("error")},r.prototype.getUser=function(){var e=t.defer();return gapi.client.load("oauth2","v2",function(){gapi.client.oauth2.userinfo.get().execute(function(t){e.resolve(t),n.$apply()})}),e.promise},r.prototype.getToken=function(){return gapi.auth.getToken()},r.prototype.setToken=function(e){return gapi.auth.setToken(e)},r.prototype.logout=function(){gapi.auth.signOut()},new r}]}]).run([function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/client.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={bindings:{appKey:"@",clientId:"@",scopes:"@?",onLogin:"&"},template:'\n\n        <svg version="1.1" data-ng-click="$ctrl.submit()" id="Layer_1" style="height: 40px;cursor:pointer;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n        \t viewBox="0 0 291.32 291.32" style="enable-background:new 0 0 291.32 291.32;" xml:space="preserve">\n        <g>\n        \t<path style="fill:#DD4B39;" d="M145.66,0c80.113,0,145.66,65.547,145.66,145.66s-65.547,145.66-145.66,145.66S0,225.772,0,145.66\n        \t\tS65.547,0,145.66,0z"/>\n        \t<g>\n        \t\t<polygon style="fill:#FFFFFF;" points="219.4,121.079 219.4,137.466 235.786,137.466 235.786,153.853 219.4,153.853 219.4,170.24\n        \t\t\t203.013,170.24 203.013,153.853 186.626,153.853 186.626,137.466 203.013,137.466 203.013,121.079 \t\t"/>\n        \t\t<path style="fill:#FFFFFF;" d="M71.919,186.626c-21.849-21.849-21.849-60.085,0.91-81.933\n        \t\t\tc16.387-16.387,40.056-20.028,60.995-11.835l8.193,4.552l9.104,6.373l-14.566,14.566l-5.462-3.641\n        \t\t\tc-12.745-8.193-30.953-6.373-42.787,5.462c-13.656,13.656-14.566,38.236,0,52.802c13.656,14.566,38.236,14.566,50.981,0\n        \t\t\tc3.641-3.641,7.283-9.104,8.193-14.566v-1.821h-32.773v-18.207h51.891l0.91,4.552v12.745c-0.91,11.835-5.462,23.67-13.656,31.863\n        \t\t\tC132.004,208.475,93.768,208.475,71.919,186.626z"/>\n        \t</g>\n        </g>\n        </svg>\n\n  ',controller:["GooglePlus",function(e){var t=this,n=t.scopes||"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/userinfo.email";t.$onInit=function(){e.init({clientId:t.clientId,apiKey:t.appKey,scopes:n})},t.submit=function(){e.login().then(function(n){e.getUser().then(function(e){var o={};o.authResponse=n,o.user=e,t.onLogin({data:o})})},function(e){console.error(e)})}}]};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={bindings:{register:"@",login:"@",background:"@",logo:"@",menus:"=?",title:"@"},template:'\n    <header class="header-login" style="background-image: url({{$ctrl.background}})">\n      <nav class="login-nav" style="{{$ctrl.menus.length == 0 ? \'border:none;\': \'\'}}">\n        <ul ng-if="$ctrl.menus.length > 0">\n          <li ng-repeat="menu in $ctrl.menus">\n            <a href="{{menu.url}}" ng-if="menu.link" title="menu.label">\n                <div ng-bind-html="menu.icon" style="float: left;margin-right: 5px;"></div>\n                {{menu.label}}\n            </a>\n            <a ui-sref="{{menu.url}}" ng-if="!menu.link" title="menu.label">\n                <div ng-bind-html="menu.icon" style="float: left;margin-right: 5px;"></div>\n                &nbsp;{{menu.label}}\n            </a>\n          </li>\n        </ul>\n      </nav>\n      <div class="logo-box">\n        <img data-ng-src="{{$ctrl.logo}}" title="{{$ctrl.title}}">\n      </div>\n    </header>\n  ',controller:[function(){var e=this;e.$onInit=function(){e.menus=e.menus||[]}}]};t.default=o},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var LoginComponent={bindings:{onLogin:"&?",configuration:"=?",register:"=?"},transclude:!0,template:'\n\n    <gl-register ng-if="$ctrl.registerSaaS"></gl-register>\n\n    <div class="gumga-login-error" style="{{$ctrl.alertErrorMessage.type==\'success\'?\'background: #009F95;\':\'\'}}" ng-show="$ctrl.alertErrorMessage">\n      {{$ctrl.alertErrorMessage.message}}\n    </div>\n    <section class="login-box">\n\n      <form name="login-form" class="login-form" data-ng-submit="$ctrl.submit(email, password)" novalidate ng-if="$ctrl.step == \'LOGIN\'">\n        <label for="username">\n          <input type="email" name="username" placeholder="E-mail" data-ng-model="email">\n        </label>\n        <label for="password">\n          <input type="password" name="password" placeholder="Senha" data-ng-model="password">\n        </label>\n        <label for="do-login">\n          <button type="submit" name="do-login" class="do-login">{{$ctrl.loginText}}</button>\n        </label>\n\n        <a class="forgot-password" style="cursor:pointer;" data-ng-click="$ctrl.updateStep(\'FORGOT\')">Esqueceu a senha?</a>\n\n        <label for="do-register" style="margin: 10px;" ng-if="$ctrl.registerFields">\n            Não tem uma conta?\n            <a  type="button"\n                style="cursor:pointer;"\n                data-ng-click="$ctrl.updateStep(\'REGISTER\')"\n                name="do-register" class="do-register">Inscreva-se</a>\n        </label>\n        <div style="margin: 25px 35px;" ng-transclude></div>\n      </form>\n\n      <form name="login-form" class="login-form" ng-show="$ctrl.step == \'CHANGE_ORGANIZATION\'">\n\n        <img style="width: 100px;\n          height: 100px;\n          padding: 5px;\n          border: 1px solid #ddd;\n          border-radius: 50%;" data-ng-src="{{$ctrl.user.profileImage}}"/>\n\n        <br>\n        <br>\n        <label>Atualmente em {{$ctrl.organizations.length}} organizações.</label>\n\n        <label for="organization">\n          <input type="text" autocomplete="off" name="username"\n          placeholder="Qual organização deseja entrar?" ng-init="$ctrl.organizationFilter = \'\'" data-ng-model="$ctrl.organizationFilter">\n        </label>\n\n        <div class="organizations-container">\n          <div style="background:#f5f5f5;margin-bottom:10px;padding: 10px;cursor: pointer;"\n            data-ng-click="$ctrl.organizationSelected = organization"\n            data-ng-repeat="organization in $ctrl.organizations | filter:{ name: $ctrl.organizationFilter }">\n            <span class="text text-muted">{{organization.name}}</span>\n            <span ng-show="$ctrl.organizationSelected.id == organization.id" class="glyphicon glyphicon-ok" aria-hidden="true"></span>\n          </div>\n        </div>\n\n        <label for="do-login">\n          <button type="button"\n                  ng-disabled="!$ctrl.organizationSelected"\n                  data-ng-click="$ctrl.changeOrganization($ctrl.organizationSelected)" name="do-login" class="do-login">{{$ctrl.changeOrganizationText}}</button>\n        </label>\n\n      </form>\n\n\n      <form name="login-form" class="login-form" ng-show="$ctrl.step == \'REGISTER\'">\n        <div style="height: 20px;">\n          <span style="cursor: pointer;font-size: 17px;" class="glyphicon glyphicon-chevron-left pull-left" ng-click="$ctrl.updateStep(\'LOGIN\')"></span>\n          <label style="cursor: pointer;" class="pull-left" ng-click="$ctrl.updateStep(\'LOGIN\')">Voltar</label>\n        </div>\n        <label data-ng-repeat="field in $ctrl.registerFields" for="{{field.field}}">\n          <input type="{{field.type}}" name="{{field.field}}" id="{{field.field}}" placeholder="{{field.placeholder}}" data-ng-model="field.value">\n        </label>\n        <label for="do-login">\n          <button type="button"\n          ng-disabled="!$ctrl.registerIsValid()"\n          name="do-login"\n          ng-click="$ctrl.submitRegister()"\n          class="do-login">{{$ctrl.registerText}}</button>\n        </label>\n      </form>\n\n      <form name="login-form" class="login-form" ng-show="$ctrl.step == \'FORGOT\'">\n        <div style="height: 20px;">\n          <span style="cursor: pointer;font-size: 17px;" class="glyphicon glyphicon-chevron-left pull-left" ng-click="$ctrl.updateStep(\'LOGIN\')"></span>\n          <label style="cursor: pointer;" class="pull-left" ng-click="$ctrl.updateStep(\'LOGIN\')">Voltar</label>\n        </div>\n        <label for="username">\n          <input type="email" name="username" placeholder="Endereço de e-mail.." data-ng-model="$ctrl.forgotEmail">\n        </label>\n        <p style="font-size: 9px;">\n          <b>Obs :</b> O E-mail informado acima, receberá uma mensagem contendo um informações de como redefinir sua senha.\n        </p>\n        <label for="do-login">\n          <button type="button"\n                  ng-disabled="!$ctrl.isValidEmail($ctrl.forgotEmail) || disabledForgotButton"\n                  data-ng-click="$ctrl.lostPassword($ctrl.forgotEmail)"\n                  name="do-login" class="do-login">{{$ctrl.forgotButtonText}}</button>\n        </label>\n      </form>\n\n      <form name="login-form" class="login-form" ng-show="$ctrl.step == \'NEW_PASSWORD\'" ng-init="$ctrl.lost={}">\n          <div style="height: 20px;">\n            <span style="cursor: pointer;font-size: 17px;" class="glyphicon glyphicon-chevron-left pull-left" ng-click="$ctrl.removeParams()"></span>\n            <label style="cursor: pointer;" class="pull-left" ng-click="$ctrl.removeParams()">Voltar</label>\n          </div>\n          <label for="password">\n            <input type="password" name="password" placeholder="Nova senha" data-ng-model="$ctrl.lost.password">\n          </label>\n          <label for="password">\n            <input type="password" name="password" placeholder="Repita a nova senha" data-ng-model="$ctrl.lost.confirmPassword">\n          </label>\n          <label for="do-login">\n            <button type="button"\n                    ng-disabled="($ctrl.lost.password != $ctrl.lost.confirmPassword) || disabledLostButton || !$ctrl.lost.password"\n                    data-ng-click="$ctrl.updatePassword($ctrl.lost);"\n                    name="do-login" class="do-login">{{$ctrl.lostButtonText}}</button>\n          </label>\n      </form>\n\n    </section>\n  ',controller:["GumgaLoginService","$timeout","$scope","$attrs",function(GumgaLoginService,$timeout,$scope,$attrs){var ctrl=this;ctrl.loginText="Entrar",ctrl.changeOrganizationText="Continuar",ctrl.registerText="Inscrever",ctrl.forgotButtonText="Redefinir",ctrl.lostButtonText="Redefinir",ctrl.disabledLostButton=!1,ctrl.disabledForgotButton=!1;var getUrlVars=function(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,o){e[n]=o});return e},params=getUrlVars();ctrl.register&&(ctrl.registerFields=ctrl.register.fields),ctrl.organizationFilter="",ctrl.updateStep=function(e){return ctrl.step=e},ctrl.updateStep("LOGIN"),$scope.$watch("$ctrl.configuration",function(){GumgaLoginService.initConfiguration(ctrl.configuration)},!0),ctrl.$onInit=function(){ctrl.configuration||console.error("Please enter the setup object for the gumga login."),GumgaLoginService.initConfiguration(ctrl.configuration)},ctrl.back=function(e){switch(e){case"LOGIN":ctrl.updateStep(e),delete ctrl.password}};var createUserImage=function(e){if(e.picture)return void(e.profileImage="data:"+e.picture.mimeType+";base64,"+e.picture.bytes);e.profileImage="src/images/user-without-image.png"};ctrl.submit=function(e,t){return e&&t?ctrl.isValidEmail(e)?(ctrl.loginText="Aguarde...",void GumgaLoginService.login(e,t).then(function(e){ctrl.user=e.data,createUserImage(ctrl.user),GumgaLoginService.setItemInSession("user",e.data),GumgaLoginService.getOrganizations(e.data.token).then(function(t){GumgaLoginService.setItemInSession("organizations",t.data),1==t.data.length&&ctrl.onLogin({user:e.data,organizations:t.data}),t.data.length>1&&(ctrl.updateStep("CHANGE_ORGANIZATION"),ctrl.organizations=t.data)},function(t){ctrl.onLogin({user:e.data,organizations:void 0})})},function(e){if(e.data&&e.data.response)switch(e.data.response){case"NO_USER":case"BAD_PASSWORD":ctrl.showMessage("error",$attrs.textBadPassword||"E-mail ou senha estão incorretos.");break;case"NO_TOKEN":case"TOKEN_EXPIRED":ctrl.showMessage("error",$attrs.textTokenExpired||"Sua sessão expirou, faça o login novamente.");break;case"INSTANCE_INACTIVE":ctrl.showMessage("error",$attrs.textInstanceInactive||"Sua conta está desativada temporariamente.");break;case"NO_INACTIVE":ctrl.showMessage("error",$attrs.textNoInstance||"Não há instâncias para sua organização.")}ctrl.loginText="Entrar"})):void ctrl.showMessage("error","Aparentemente você digitou um E-mail incorreto."):void ctrl.showMessage("error","Precisamos que todas as informações sejam preenchidas.")},ctrl.changeOrganization=function(e){ctrl.changeOrganizationText="Aguarde...",GumgaLoginService.changeOrganization(ctrl.user.token,e).then(function(e){sessionStorage.removeItem("user"),sessionStorage.removeItem("gumgaToken"),ctrl.user.token=e.data.value,ctrl.user.organization=e.data.organization.name,ctrl.user.organizationHierarchyCode=e.data.organization.hierarchyCode,ctrl.user.softwareHouse=e.data.isSoftwareHouse,ctrl.user.securityManager=e.data.securityManager,sessionStorage.setItem("gumgaToken",e.data.value),GumgaLoginService.setItemInSession("user",ctrl.user),ctrl.loginText="Entrar",ctrl.updateStep("LOGIN"),ctrl.onLogin({user:ctrl.user,organizations:ctrl.organizations})},function(e){ctrl.changeOrganizationText="Erro :("})},ctrl.isUrl=function(e){return/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},ctrl.isValidEmail=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)};var getRegisterFieldByName=function(e){return ctrl.registerFields.filter(function(t){return t.field==e})[0]},handlingErrorRegister=function(e,t,n){var o=document.getElementById(t.field),i=document.getElementById(e.field);o&&i&&(o.classList[n?"remove":"add"]("gumga-login-input-error"),i.classList[n?"remove":"add"]("gumga-login-input-error"))};ctrl.registerIsValid=function(){var valid=!0;if(ctrl.registerFields)return ctrl.registerFields.forEach(function(field){field.conditions&&field.conditions.forEach(function(condition){if(condition.operation&&condition.field){var comparatorField=getRegisterFieldByName(condition.field);valid&&(valid=eval("'"+field.value+"' "+condition.operation+" '"+comparatorField.value+"'"),handlingErrorRegister(field,comparatorField,valid))}})}),valid},ctrl.submitRegister=function(){if(ctrl.registerText="Aguarde...",ctrl.registerFields){var e={};ctrl.registerFields.forEach(function(t){e[t.field]=t.value}),ctrl.register.submit(e),ctrl.loginText="Entrar",ctrl.updateStep("LOGIN")}},ctrl.lostPassword=function(e){ctrl.forgotButtonText="Aguarde...",ctrl.disabledForgotButton=!0,GumgaLoginService.lostPassword(e).then(function(e){"OK"==e.data.response?(ctrl.showMessage("success","Solicitação de nova senha enviada, verifique seu E-mail."),delete ctrl.forgotEmail,ctrl.updateStep("LOGIN")):"NO_USER"==e.data.response&&ctrl.showMessage("error","O E-mail informado não possui registro."),ctrl.forgotButtonText="Redefinir",ctrl.disabledForgotButton=!1},function(e){ctrl.showMessage("error","Falha ao conectar com os servidores, tente mais tarde."),ctrl.forgotButtonText="Redefinir",ctrl.disabledForgotButton=!1,ctrl.updateStep("LOGIN")})},ctrl.updatePassword=function(e){if(ctrl.lostButtonText="Aguarde...",ctrl.disabledLostButton=!0,!e.password||e.password!=e.confirmPassword)return void ctrl.showMessage("error","Verifique se você repetiu sua senha corretamente.");GumgaLoginService.updatePassword(params.ticket,e.password).then(function(e){"OK"==e.data.response?(ctrl.showMessage("success","Sua senha foi redefinida com sucesso."),ctrl.lostButtonText="Redefinir",ctrl.disabledLostButton=!1,ctrl.updateStep("LOGIN")):"TOKEN_EXPIRED"==e.data.response?ctrl.showMessage("error","Seu ticket de redefinição de senha foi expirado.",3e3,function(){ctrl.removeParams()}):ctrl.showMessage("error","Falha ao conectar com os servidores, aguarde...",3e3,function(){ctrl.removeParams()})},function(e){ctrl.showMessage("error","Falha ao conectar com os servidores, aguarde...",3e3,function(){ctrl.removeParams()})})},ctrl.showMessage=function(e,t,n,o){ctrl.alertErrorMessage={message:t,type:e},$timeout(function(){delete ctrl.alertErrorMessage,o&&o()},n||3e3)},ctrl.removeParams=function(){location.href=location.href.substring(0,location.href.lastIndexOf("?"))},params.email&&(ctrl.registerSaaS=!0),params.ticket&&GumgaLoginService.searchTicket(params.ticket).then(function(e){"OK"==e.data.response?ctrl.updateStep("NEW_PASSWORD"):"TOKEN_EXPIRED"==e.data.response?ctrl.showMessage("error","Seu ticket de redefinição de senha foi expirado.",3e3,function(){ctrl.removeParams()}):ctrl.showMessage("error","Falha ao conectar com os servidores, aguarde...",3e3,function(){ctrl.removeParams()})},function(e){ctrl.showMessage("error","Falha ao conectar com os servidores, aguarde...",3e3,function(){ctrl.removeParams()})})}]};exports.default=LoginComponent},function(e,t,n){"use strict";function o(e,t){var n={};return n.login=function(t,o){return e.post(n.configuration.appURL.concat("/public/token"),{user:t,password:o})},n.getOrganizations=function(t){return e.get(n.configuration.appURL.concat("/public/token/organizations/".concat(t)))},n.verifiedUser=function(t){return e.get(n.configuration.appURL.concat("/public/token/verified/".concat(t).concat("/")))},n.getUrlVars=function(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,o){e[n]=o});return e},n.changeOrganization=function(t,o){return e.get(n.configuration.appURL.concat("/public/token/changeorganizationandtoken/".concat(t).concat("/").concat(o.id)))},n.lostPassword=function(t){return e.get(n.configuration.appURL.concat("/public/token/lost-my-password"),{params:{email:t,url:location.href}})},n.searchTicket=function(t){return e.get(n.configuration.appURL.concat("/public/token/searchticket/").concat(t))},n.updatePassword=function(t,o){return e.get(n.configuration.appURL.concat("/public/token/lostpassword/").concat(t).concat("/").concat(o))},n.setItemInSession=function(e,n){return t.sessionStorage.setItem(e,JSON.stringify(n))},n.initConfiguration=function(e){return n.configuration=e},n.registerSaaS=function(t){return e.post(n.configuration.appURL.concat("/public/mobiage-sass/create-account"),t)},n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=o,o.$inject=["$http","$window"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={bindings:{},template:n(10),controller:["GumgaLoginService","$timeout","$scope","$element",function(e,t,n,o){var i=this,r=e.getUrlVars(),a={apiKey:"AIzaSyBOev5icnmyLi8gacBt7Rd00yoi-E-isO8",authDomain:"kigi-193622.firebaseapp.com",databaseURL:"https://kigi-193622.firebaseio.com",projectId:"kigi-193622",storageBucket:"",messagingSenderId:"277774252950"};firebase.initializeApp(a),i.config={titleStepOne:angular.element("gl-login").attr("register-title-step-one")||"Ebaaa!!!",subTitleStepOne:angular.element("gl-login").attr("register-subtitle-step-one")||"Estamos muitos felizes por você topar o desafio ;)",textBtnStepOne:angular.element("gl-login").attr("register-text-btn-step-one")||"Bora lá se registrar",titleStepTwo:angular.element("gl-login").attr("register-title-step-two")||"agora você é quase parte da familia",subTitleStepTwo:angular.element("gl-login").attr("register-subtitle-step-two")||"Seu ambiente virtual na Kigi vai ser incrível",textBtnStepTwo:angular.element("gl-login").attr("register-text-btn-step-two")||"Continuar",logo:angular.element("gl-login").attr("register-logo")},i.$onInit=function(){i.step=1,i.user={email:r.email},i.initAutoComplete(),i.user.email&&i.blurEmail()},i.initAutoComplete=function(){i.user.address={};var e=(new google.maps.LatLngBounds(new google.maps.LatLng(-33.8902,151.1759),new google.maps.LatLng(-33.8474,151.2631)),document.getElementById("cepInput")),n=new google.maps.places.Autocomplete(e,{});n.addListener("place_changed",function(){var e=n.getPlace();t(function(){i.user.address.street=e.name,e.address_components.forEach(function(e){-1!=e.types.indexOf("postal_code")&&(i.user.address.zipCode=e.long_name)})})})},i.getFirstName=function(){return(i.user.name||"").split(" ")[0]},i.getOrganizationName=function(){return(i.user.organization||"").charAt(0).toUpperCase()+(i.user.organization||"").slice(1)},i.isValidEmail=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},i.setTypePerson=function(e){i.user.typePerson=e,"JURIDICA"==i.user.typePerson&&i.continue(),"FISICA"==i.user.typePerson&&(i.step=6)},i.setQntPerson=function(e){i.user.organizationSize=e,i.continue()},i.setFollow=function(e){i.user.follow=e,i.continue()},i.isValidContinue=function(){var e=!0;return 1==i.step&&(i.user.name||(e=!1),i.user.email&&i.isValidEmail(i.user.email)||(e=!1),i.user.password&&i.user.confirmPassword||(e=!1),i.user.password!=i.user.confirmPassword&&(e=!1),(i.user.password&&i.user.password.length<3||i.user.confirmPassword&&i.user.confirmPassword.length<3)&&(e=!1)),2==i.step&&(i.user.organization||(e=!1)),6==i.step&&(i.user.address.number||(e=!1),i.user.address.zipCode||(e=!1),i.user.address.street||(e=!1)),e},i.blurEmail=function(){e.verifiedUser(i.user.email).then(function(e){i.emailStatus=e.data.response,"OK"==i.emailStatus&&o.find('input[type="email"]').addClass("ng-touched")},function(e){})},i.continue=function(){i.loading=!0,t(function(){delete i.loading,i.step++},1500)},i.back=function(){i.step--},i.create=function(){i.loading=!0;var t={name:i.user.name,email:i.user.email,password:i.user.password,followUp:i.user.follow,organizationName:i.user.organization,organizationContributors:i.user.organizationSize,role:i.user.type,type:i.user.typePerson,address:i.user.address};firebase.database().ref("users/").push(t),e.registerSaaS(t).then(function(e){200==e.status&&(i.step=7),delete i.loading},function(e){delete i.loading})},i.goToLogin=function(){location.href=location.origin}}]};t.default=o},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t,n,i){var r=this;o(this,e),this.options={appId:null,status:!0,cookie:!1,xfbml:!1,version:"v2.4",scope:""},["appId","status","cookie","xfbml","version","scope"].map(function(e){r[e]=angular.bind(r,r.getSetOption,e)}),this.FB=null,this.FBPromise=null,this.initPromise=null,this.$window=t,this.$timeout=n,this.$q=i,this.lang="en_US",this.loading=!1,this.loaded=!1,this.initialized=!1}return i(e,[{key:"getSetOption",value:function(e,t){return void 0===t?this.options[e]:(this.options[e]=t,this)}},{key:"setLang",value:function(e){this.lang=e}},{key:"handleResponse",value:function(e){!e||e.error?this.reject(e&&e.error||!1):this.resolve(e)}},{key:"addCallbackToPromise",value:function(e,t){var n=e.promise;return"function"==typeof t&&n.then(t),n}},{key:"load",value:function(){var e=this;if(!this.FBPromise){var t=this.$q.defer();this.$window.fbAsyncInit=function(){e.FB=e.$window.FB,e.loading=!1,e.loaded=!0,e.$timeout(function(){return t.resolve(FB)})},function(t,n,o){var i=void 0,r=t.getElementsByTagName(n)[0];t.getElementById(o)||(i=t.createElement(n),i.id=o,i.src="//connect.facebook.net/"+e.lang+"/sdk.js",r.parentNode.insertBefore(i,r))}(this.$window.document,"script","facebook-jssdk"),this.loading=!0,this.FBPromise=t.promise}return this.FBPromise}},{key:"init",value:function(e){var t=this;return this.initPromise||(this.initPromise=this.load().then(function(n){if(e=angular.extend({appId:t.options.appId,status:t.options.status,cookie:t.options.cookie,xfbml:t.options.xfbml,version:t.options.version},e),!e.appId)throw new Error("FacebookService: appId is not set");return n.init(e),t.initialized=!0,n})),this.initPromise}},{key:"getLoginStatus",value:function(e){var t=this;return this.init().then(function(n){var o=t.$q.defer();return n.getLoginStatus(angular.bind(o,t.handleResponse)),t.addCallbackToPromise(o,e)})}},{key:"api",value:function(){var e=this,t=arguments;return this.init().then(function(n){var o=e.$q.defer(),i=Array.prototype.slice.call(t),r=void 0;return"function"==typeof i[i.length-1]&&(r=i.pop()),i.push(angular.bind(o,e.handleResponse)),n.api.apply(n,i),e.addCallbackToPromise(o,r)})}},{key:"login",value:function(e,t){var n=this;return this.init().then(function(o){var i=n.$q.defer();"function"!=typeof e&&(e=null,t=e);return o.login(angular.bind(i,n.handleResponse),{scope:function(e){var o=t&&t[e];return void 0===o?n.options[e]:o}("scope")}),n.addCallbackToPromise(i,e)})}},{key:"logout",value:function(e){var t=this;return this.getLoginStatus().then(function(n){var o=t.$q.defer();return n.authResponse?t.FB.logout(angular.bind(o,e)):o.reject(n),t.addCallbackToPromise(o,e)})}},{key:"disconnect",value:function(e){var t=this;return this.init().then(function(n){var o=t.$q.defer();return n.api("/me/permissions","DELETE",angular.bind(o,t.handleResponse)),t.addCallbackToPromise(o,e)})}}],[{key:"facebookFactory",value:function(t,n,o){return new e(t,n,o)}}]),e}();t.default=r,r.facebookFactory.$inject=["$window","$timeout","$q"]},function(e,t){},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=n(4),r=o(i),a=n(6),s=o(a),l=n(5),c=o(l),u=n(3),d=o(u),g=n(0),p=o(g),m=n(2),f=o(m),v=n(7),h=o(v),b=n(1);o(b);n(8),angular.module("gumga.login",["googleplus"]).component("glLogin",r.default).component("glRegister",s.default).component("glLoginHeader",d.default).component("glLoginFacebook",p.default).component("glLoginGoogle",f.default).service("GumgaLoginService",c.default).factory("FacebookFactory",h.default.facebookFactory)},function(e,t){e.exports='<style>body{overflow:hidden!important}</style> <div class=gumga-register> <div id=loadingbar ng-show=$ctrl.loading> <div id=bar4></div> <div id=bar3></div> <div id=bar2></div> <div id=bar1></div> </div> <img ng-src={{$ctrl.config.logo}} /> <div class=content ng-show="$ctrl.step == 1"> <h2 class=title> <span class=orange> <b>uhuuul!</b> </span> estamos muito felizes <br> por você topar o desafio <span class=orange>;)</span> </h2> <div class=container> <div class=row> <div class="col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3"> <form autocomplete=off> <div class=form-group> <div class=row> <div class=col-md-12> <input type=text name=mobiageUserName autocomplete=off ng-model=$ctrl.user.name ng-class="{\'input-error\': (!$ctrl.user.name || $ctrl.user.name.length < 2)}" placeholder="Nome Completo" class=form-control> <i class=material-icons title="Preencha seu nome completo">close</i> </div> </div> </div> <div class=form-group> <div class=row> <div class=col-md-12> <input type=email autocomplete=off ng-model=$ctrl.user.email ng-blur=$ctrl.blurEmail() ng-class="{\'input-error\': ($ctrl.emailStatus == \'OK\' || !$ctrl.user.email || !$ctrl.isValidEmail($ctrl.user.email))}" placeholder="Seu E-mail" class=form-control> <i class=material-icons title="{{$ctrl.emailStatus == \'OK\' ? \'Endereço de e-mail já está sendo utilizado\' : \'Informe um endereço de e-mail válido\'}}">close</i> </div> </div> </div> <div class=form-group> <div class=row> <div class=col-md-12> <input type=password autocomplete=off ng-model=$ctrl.user.password placeholder="Digite uma senha" ng-class="{\'input-error\': (!$ctrl.user.password || $ctrl.user.password.length < 3)}" class=form-control> <i class=material-icons title="Informe uma senha maior que 3 caracteres.">close</i> </div> </div> </div> <div class=form-group> <div class=row> <div class=col-md-12> <input type=password autocomplete=off ng-model=$ctrl.user.confirmPassword placeholder="Repetir Senha" class=form-control ng-class="{\'input-error\': (!$ctrl.user.confirmPassword || $ctrl.user.confirmPassword != $ctrl.user.password)}"> <i class=material-icons title="Repita a senha corretamente.">close</i> </div> </div> </div> <button class=btn-register ng-disabled="!$ctrl.isValidContinue() || $ctrl.loading || $ctrl.emailStatus == \'OK\'" ng-click=$ctrl.continue()> {{$ctrl.config.textBtnStepOne}} </button> <span class=terms>Clicando no botão acima você concoda com nossos <a href=#> <b>termos de uso</b> </a> </span> </form> </div> </div> </div> </div> <div class=content ng-show="$ctrl.step == 2"> <h2 class=title> <span class=pink> <b>{{$ctrl.getFirstName()}}</b> </span>, agora você <br> é quase parte da família! <i class="material-icons pink" style=font-size:40px>favorite</i> </h2> <p class=subtitle>Seu ambiente virtual na Kigi <br> vai ser <b>íncrivel!</b> </p> <div class=container> <div class=row> <div class="col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3"> <form> <div class=form-group> <div class=row> <div class=col-md-12> <i class="material-icons icon-left">domain</i> <input type=text autocomplete=off ng-model=$ctrl.user.organization ng-class="{\'input-error\': (!$ctrl.user.organization)}" placeholder="Nome da empresa?" class="form-control desc-active"> <span class=green>.kigi.com.br</span> </div> </div> </div> <div class=form-group> <div class=row> <div class=col-md-12> <i class="material-icons icon-left">language</i> <input type=text autocomplete=off ng-model=$ctrl.user.domain placeholder="Você já tem um dominio? " class="form-control desc-active"> </div> </div> </div> <button class=btn-register ng-disabled="!$ctrl.isValidContinue() || $ctrl.loading" ng-click=$ctrl.continue()> Próximo </button> </form> </div> </div> </div> </div> <div class=content ng-show="$ctrl.step == 3"> <h2 class=title> <span class=pink> <b>{{$ctrl.getOrganizationName()}} & Kigi</b> </span> a parceria <br> que deu <span class=uppercase>certo!</span> <i class=material-icons>thumb_up</i> </h2> <p class=subtitle>Fale um pouco sobre você, <b>qual <br> o seu negócio?</b> </p> <div class=container> <div class=row> <div class="col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3 step-three"> <form> <div class=row> <div class="col-md-4 option-step left" ng-click="$ctrl.setTypePerson(\'FISICA\')"> <i class=material-icons>accessibility</i> <label>Ainda <b>não tenho</b> <br> empresa</label> </div> <div class="col-md-4 option-step right" ng-click="$ctrl.setTypePerson(\'JURIDICA\')"> <i class=material-icons>domain</i> <label>Estou <b>pronto para <br> decolar! </b> Já tenho <br> minha empresa. </label> </div> </div> </form> </div> </div> </div> </div> <div class=content ng-show="$ctrl.step == 4"> <h2 class=title> <span class=orange> <b>#</b> </span>Beleza {{$ctrl.getFirstName()}}...</h2> <p class=subtitle>O que você faz ai na empresa?</p> <select class=gl-select ng-model=$ctrl.user.type ng-init="$ctrl.user.type = \'Diretor\'"> <option value=Colaborador>Colaborador</option> <option value=Diretor>Diretor</option> </select> <p class=subtitle>Quantos colaboradores você já tem?</p> <div class=container> <div class=row> <form> <div class="row row-step"> <div class="col-md-3 option-step left area-1" ng-click="$ctrl.setQntPerson(\'Sozinho\')"> <i class=material-icons>accessibility</i> <label>Tô sozinho!</label> </div> <div class="col-md-3 option-step right area-2" ng-click="$ctrl.setQntPerson(\'Até 3\')"> <div class="multi multi-three"> <i class=material-icons>group</i> </div> <label>Até 3 Pessoas</label> </div> <div class="col-md-3 option-step right area-3" ng-click="$ctrl.setQntPerson(\'Até 7\')"> <div class="multi multi-seven"> <i class=material-icons>group</i> <i class=material-icons style=position:absolute;bottom:62px;padding:0;border:none;right:30px;background:#f86131;color:#fff;font-size:20px>add</i> </div> <label>Até 7 Pessoas</label> </div> <div class="col-md-3 option-step right area-4" ng-click="$ctrl.setQntPerson(\'Mais que 7\')"> <div class="multi multi-more"> <i class=material-icons>library_add</i> </div> <label> <b>Eita</b>, mais de 7 <br> pessoas?</label> </div> </div> </form> </div> </div> </div> <div class=content ng-show="$ctrl.step == 5"> <h2 class=title> <span class=orange> <b>#</b> </span>Qual seguimento <br> você atua?</h2> <p class=subtitle>Estamos nos conhecendo isso é <b>incrível!</b> </p> <div class=container> <div class=row> <form> <div class="row row-step"> <div class="col-md-3 option-step left area-1" ng-click="$ctrl.setFollow(\'Industria\')"> <i class=material-icons>domain</i> <label>Industria</label> </div> <div class="col-md-3 option-step left area-2" ng-click="$ctrl.setFollow(\'Varejo\')"> <i class=material-icons>shopping_cart</i> <label>Varejo</label> </div> <div class="col-md-3 option-step left area-3" ng-click="$ctrl.setFollow(\'Atacado e Distribuição\')"> <i class=material-icons>store</i> <label>Atacado e Distribuição</label> </div> <div class="col-md-3 option-step left area-4" ng-style="{\'color\': $ctrl.infoFollow ? \'#e41555\' : \'\'}" ng-click="$ctrl.infoFollow = !$ctrl.infoFollow"> <i class=material-icons>help</i> <label>Conta pra gente</label> </div> </div> <div class=row ng-show=$ctrl.infoFollow ng-style="{\'margin-top\': \'10rem\'}"> <div class=col-md-12> <div class=form-group> <div class="row row-flex"> <div class=col-md-10> <i class="material-icons icon-left">help</i> <input type=text autocomplete=off ng-model=$ctrl.user.follow ng-class="{\'input-error\': (!$ctrl.user.follow)}" placeholder="Digite seu seguimento" class=form-control> </div> <div class="col-md-2 col-flex"> <button class="btn-register btn-register-arrow" ng-disabled="!$ctrl.user.follow || $ctrl.loading" ng-click=$ctrl.continue()> <i class=material-icons>keyboard_arrow_right</i> </button> </div> </div> </div> </div> </div> </form> </div> </div> </div> <div class=content ng-show="$ctrl.step == 6"> <h2 class=title> <span class=orange> <b>#</b> </span>Beleza, agora é só <br> configurar <span class=orange> <b>:)</b> </span> </h2> <p class=subtitle>Estamos quase lá, vamos configurar <br> tudo pra você.</p> <div class=container> <div class=row> <div class="col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3 step-three"> <form> <div class=form-group> <div class=row> <div class=col-md-12> <i class="material-icons icon-left">room</i> <input type=text id=cepInput autocomplete=off placeholder="Conta pra gente seu endereço" class="form-control desc-active"> </div> </div> </div> <div class=form-group> <div class=row> <div class=col-md-8> <input type=text autocomplete=off ng-model=$ctrl.user.address.zipCode ng-class="{\'input-error\': !$ctrl.user.address.zipCode}" placeholder=CEP class=form-control> <i class=material-icons title="Preencha seu CEP">close</i> </div> <div class=col-md-4> <input type=text autocomplete=off ng-model=$ctrl.user.address.number ng-class="{\'input-error\': !$ctrl.user.address.number}" placeholder=Número class=form-control> <i class=material-icons title="Preencha seu CEP">close</i> </div> </div> </div> <button class=btn-register ng-disabled="!$ctrl.isValidContinue() || $ctrl.loading" ng-click=$ctrl.create()> Finalizar </button> </form> </div> </div> </div> </div> <div class=content ng-show="$ctrl.step == 7"> <h2 class=title> Tudo deu certo <i class="material-icons pink" style=font-size:40px>favorite</i> </h2> <p class=subtitle>Criamos a sua conta, você já <br> pode começar a <b>decolar!</b> </p> <div class=container> <div class=row> <div class="col-sm-8 col-sm-offset-2 col-lg-6 col-lg-offset-3"> <form> <button class=btn-register ng-disabled="!$ctrl.isValidContinue() || $ctrl.loading" ng-click=$ctrl.goToLogin()> Decolar </button> </form> </div> </div> </div> </div> <button class=btn-back ng-click=$ctrl.back() ng-show="$ctrl.step > 1" ng-hide="$ctrl.step == 7"> <i class=material-icons>keyboard_arrow_left</i> Voltar </button> </div>'}]);