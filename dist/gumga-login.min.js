!function e(t,n,o){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n?n:e)},c,c.exports,e,t,n,o)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<o.length;a++)i(o[a]);return i}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={bindings:{appKey:"@",onLogin:"&"},template:'\n\n        <button class="button-facebook" data-ng-click="$ctrl.submit()">\n          Entrar com o facebook\n        </button>\n\n  ',controller:["FacebookFactory","$transclude",function(e,t){var n=this;e.setLang("pt_BR"),e.init({appId:n.appKey,status:!0,cookie:!1,xfbml:!1,version:"v2.4"}),n.me=function(t){e.api("/me",{fields:"name,email,gender,birthday"},function(e){var o={};o.authResponse=t.authResponse,o.user=e,n.onLogin({data:o})})},n.submit=function(){e.getLoginStatus(function(t){"connected"===t.status?n.me(t):e.login(function(e){"connected"===e.status&&n.me(e)},{scope:"public_profile,email,user_birthday"})})}}]};n.default=o},{}],2:[function(e,t,n){"use strict";angular.module("googleplus",[]).provider("GooglePlus",[function(){var e={};e.clientId=null,this.setClientId=function(t){return e.clientId=t,this},this.getClientId=function(){return e.clientId},e.apiKey=null,this.setApiKey=function(t){return e.apiKey=t,this},this.getApiKey=function(){return e.apiKey},e.scopes="https://www.googleapis.com/auth/plus.login",this.setScopes=function(t){return e.scopes=t,this},this.getScopes=function(){return e.scopes},this.init=function(t){angular.extend(e,t)},this.enableServerSide=function(){e.accessType="offline",e.responseType="code token id_token gsession"},this.disableServerSide=function(){delete e.accessType,delete e.responseType},this.$get=["$q","$rootScope","$timeout",function(t,n,o){var i,r=function(){};return r.prototype.init=function(t){angular.extend(e,t)},r.prototype.login=function(){i=t.defer(),console.log("agr",e.scopes);var n={client_id:e.clientId,scope:e.scopes,immediate:!1};return e.accessType&&e.responseType&&(n.access_type=e.accessType,n.response_type=e.responseType),gapi.auth.authorize(n,this.handleAuthResult),i.promise},r.prototype.checkAuth=function(){gapi.auth.authorize({client_id:e.clientId,scope:e.scopes,immediate:!0},this.handleAuthResult)},r.prototype.handleClientLoad=function(){gapi.client.setApiKey(e.apiKey),gapi.auth.init(function(){}),o(this.checkAuth,1)},r.prototype.handleAuthResult=function(e){e&&!e.error?(i.resolve(e),n.$apply()):i.reject("error")},r.prototype.getUser=function(){var e=t.defer();return gapi.client.load("oauth2","v2",function(){gapi.client.oauth2.userinfo.get().execute(function(t){e.resolve(t),n.$apply()})}),e.promise},r.prototype.getToken=function(){return gapi.auth.getToken()},r.prototype.setToken=function(e){return gapi.auth.setToken(e)},r.prototype.logout=function(){gapi.auth.signOut()},new r}]}]).run([function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/client.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}])},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={bindings:{appKey:"@",clientId:"@",scopes:"@?",onLogin:"&"},template:'\n\n        <button class="button-google" data-ng-click="$ctrl.submit()">\n          Entrar com o Google+\n        </button>\n\n  ',controller:["GooglePlus",function(e){var t=this,n=t.scopes||"https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/userinfo.email";e.init({clientId:t.clientId,apiKey:t.appKey,scopes:n}),t.submit=function(){e.login().then(function(n){e.getUser().then(function(e){var o={};o.authResponse=n,o.user=e,t.onLogin({data:o})})},function(e){console.error(e)})}}]};n.default=o},{}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={bindings:{register:"@",login:"@",background:"@",logo:"@",title:"@"},template:'\n    <header class="header-login" style="background-image: url({{$ctrl.background}})">\n      <nav class="login-nav">\n        <ul>\n          <li>\n            <a ui-srref="{{$ctrl.login}}" ui-sref-active="selected" title="Login" class="login"">Login</a>\n          </li>\n          <li>\n            <a ui-sref="{{$ctrl.register}}" ui-sref-active="selected" title="Cadastro" class="register">Cadastro</a>\n          </li>\n        </ul>\n      </nav>\n      <div class="logo-box">\n        <img data-ng-src="{{$ctrl.logo}}" title="{{$ctrl.title}}">\n      </div>\n    </header>\n  '};n.default=o},{}],5:[function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}var i=e("./login/component.js"),r=o(i),a=e("./header/component.js"),s=o(a),l=e("./facebook/component.js"),u=o(l),c=e("./google/component.js"),p=o(c),d=e("../factorys/facebook/factory.js"),f=o(d),g=e("./google/angular-google-plus.js");o(g);angular.module("gumga.login",["googleplus"]).component("glLogin",r.default).component("glLoginHeader",s.default).component("glLoginFacebook",u.default).component("glLoginGoogle",p.default).factory("FacebookFactory",f.default.facebookFactory)},{"../factorys/facebook/factory.js":7,"./facebook/component.js":1,"./google/angular-google-plus.js":2,"./google/component.js":3,"./header/component.js":4,"./login/component.js":6}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var o={bindings:{onSubmit:"&",forgot:"@",type:"@",username:"@",password:"@"},transclude:!0,template:'\n    <section class="login-box">\n      <div style="    margin: 25px 35px;" ng-transclude></div>\n      <form name="login-form" class="login-form" data-ng-submit="$ctrl.submit($ctrl.login)" novalidate>\n        <label for="username">\n          <input type="{{$ctrl.type}}" name="username" placeholder="E-mail" data-ng-model="$ctrl.login[$ctrl.username]">\n        </label>\n        <label for="password">\n          <input type="password" name="password" placeholder="Senha" data-ng-model="$ctrl.login[$ctrl.password]">\n        </label>\n        <label for="do-login">\n          <button type="submit" name="do-login" class="do-login">Entrar</button>\n        </label>\n        <label for="do-register">\n          <button type="button" name="do-register" class="do-register">Registrar</button>\n        </label>\n\n        <a class="forgot-password" ui-sref="{{$ctrl.forgot}}">Esqueceu a senha?</a>\n      </form>\n    </section>\n  ',controller:[function(){var e=this;e.submit=function(t){e.onSubmit({login:t})}}]};n.default=o},{}],7:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(){function e(t,n,i){var r=this;o(this,e),this.options={appId:null,status:!0,cookie:!1,xfbml:!1,version:"v2.4",scope:""};var a=["appId","status","cookie","xfbml","version","scope"];a.map(function(e){r[e]=angular.bind(r,r.getSetOption,e)}),this.FB=null,this.FBPromise=null,this.initPromise=null,this.$window=t,this.$timeout=n,this.$q=i,this.lang="en_US",this.loading=!1,this.loaded=!1,this.initialized=!1}return i(e,[{key:"getSetOption",value:function(e,t){return void 0===t?this.options[e]:(this.options[e]=t,this)}},{key:"setLang",value:function(e){this.lang=e}},{key:"handleResponse",value:function(e){!e||e.error?this.reject(e&&e.error||!1):this.resolve(e)}},{key:"addCallbackToPromise",value:function(e,t){var n=e.promise;return"function"==typeof t&&n.then(t),n}},{key:"load",value:function(){var e=this;return this.FBPromise||!function(){var t=e.$q.defer();e.$window.fbAsyncInit=function(){e.FB=e.$window.FB,e.loading=!1,e.loaded=!0,e.$timeout(function(){return t.resolve(FB)})},function(t,n,o){var i=void 0,r=t.getElementsByTagName(n)[0];t.getElementById(o)||(i=t.createElement(n),i.id=o,i.src="//connect.facebook.net/"+e.lang+"/sdk.js",r.parentNode.insertBefore(i,r))}(e.$window.document,"script","facebook-jssdk"),e.loading=!0,e.FBPromise=t.promise}(),this.FBPromise}},{key:"init",value:function(e){var t=this;return this.initPromise||(this.initPromise=this.load().then(function(n){if(e=angular.extend({appId:t.options.appId,status:t.options.status,cookie:t.options.cookie,xfbml:t.options.xfbml,version:t.options.version},e),!e.appId)throw new Error("FacebookService: appId is not set");return n.init(e),t.initialized=!0,n})),this.initPromise}},{key:"getLoginStatus",value:function(e){var t=this;return this.init().then(function(n){var o=t.$q.defer();return n.getLoginStatus(angular.bind(o,t.handleResponse)),t.addCallbackToPromise(o,e)})}},{key:"api",value:function(){var e=this,t=arguments;return this.init().then(function(n){var o=e.$q.defer(),i=Array.prototype.slice.call(t),r=void 0;return"function"==typeof i[i.length-1]&&(r=i.pop()),i.push(angular.bind(o,e.handleResponse)),n.api.apply(n,i),e.addCallbackToPromise(o,r)})}},{key:"login",value:function(e,t){var n=this;return this.init().then(function(o){var i=n.$q.defer();"function"!=typeof e&&(e=null,t=e);var r=function(e){var o=t&&t[e];return void 0===o?n.options[e]:o};return o.login(angular.bind(i,n.handleResponse),{scope:r("scope")}),n.addCallbackToPromise(i,e)})}},{key:"logout",value:function(e){var t=this;return this.getLoginStatus().then(function(n){var o=t.$q.defer();return n.authResponse?t.FB.logout(angular.bind(o,e)):o.reject(n),t.addCallbackToPromise(o,e)})}},{key:"disconnect",value:function(e){var t=this;return this.init().then(function(n){var o=t.$q.defer();return n.api("/me/permissions","DELETE",angular.bind(o,t.handleResponse)),t.addCallbackToPromise(o,e)})}}],[{key:"facebookFactory",value:function(t,n,o){return new e(t,n,o)}}]),e}();n.default=r,r.facebookFactory.$inject=["$window","$timeout","$q"]},{}]},{},[5]);